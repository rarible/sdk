import type Web3 from "web3"
import type { Address } from "@rarible/ethereum-api-client"
import type { Contract } from "web3-eth-contract"
import type { AbiItem } from "../../common/abi-item"

export function createOpenseaProxyRegistryContract(web3: Web3, address?: Address): Contract {
	return new web3.eth.Contract(proxyRegistryAbi, address)
}

export async function deployOpenseaProxyRegistry(web3: Web3) {
	const empty = createOpenseaProxyRegistryContract(web3)
	const [address] = await web3.eth.getAccounts()
	return empty.deploy({ data: proxyRegistryBytecode }).send({ from: address, gas: 4000000, gasPrice: "0" })
}

export const proxyRegistryBytecode =
    "0x6080604052621275006005556006805460ff1916905534801561002157600080fd5b5060008054600160a060020a0319163317905561003c61007e565b604051809103906000f080158015610058573d6000803e3d6000fd5b5060018054600160a060020a031916600160a060020a039290921691909117905561008e565b6040516109b48061137583390190565b6112d88061009d6000396000f3006080604052600436106100da5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166306fdde0381146100df5780631a86ac4f1461016957806338b6e4071461019257806353376d1f146101b55780635eebea20146101d657806369dc9ff314610209578063715018a61461022a5780638da5cb5b1461023f57806397204d8e14610270578063c455279114610285578063d4e8e063146102a6578063ddd81f82146102c7578063e71a02e1146102dc578063ef7f3834146102f1578063f2fde38b14610312575b600080fd5b3480156100eb57600080fd5b506100f4610333565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561012e578181015183820152602001610116565b50505050905090810190601f16801561015b5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561017557600080fd5b5061017e61036a565b604080519115158252519081900360200190f35b34801561019e57600080fd5b506101b3600160a060020a0360043516610373565b005b3480156101c157600080fd5b506101b3600160a060020a03600435166103e0565b3480156101e257600080fd5b506101f7600160a060020a036004351661044a565b60408051918252519081900360200190f35b34801561021557600080fd5b5061017e600160a060020a036004351661045c565b34801561023657600080fd5b506101b3610471565b34801561024b57600080fd5b5061025461050f565b60408051600160a060020a039092168252519081900360200190f35b34801561027c57600080fd5b5061025461051e565b34801561029157600080fd5b50610254600160a060020a036004351661052d565b3480156102b257600080fd5b506101b3600160a060020a0360043516610548565b3480156102d357600080fd5b50610254610642565b3480156102e857600080fd5b506101f761082c565b3480156102fd57600080fd5b506101b3600160a060020a0360043516610832565b34801561031e57600080fd5b506101b3600160a060020a036004351661090b565b60408051808201909152601d81527f50726f6a6563742057797665726e2050726f7879205265676973747279000000602082015281565b60065460ff1681565b600054600160a060020a031633146103bc576040805160e560020a62461bcd028152602060048201526001602482015260f860020a603102604482015290519081900360640190fd5b600160a060020a03166000908152600460205260409020805460ff19166001179055565b600054600160a060020a03163314610429576040805160e560020a62461bcd028152602060048201526001602482015260f860020a603102604482015290519081900360640190fd5b600160a060020a03166000908152600460205260409020805460ff19169055565b60036020526000908152604090205481565b60046020526000908152604090205460ff1681565b600054600160a060020a031633146104ba576040805160e560020a62461bcd028152602060048201526001602482015260f860020a603102604482015290519081900360640190fd5b60008054604051600160a060020a03909116917ff8df31144d9c2f0f6b59d69b8b98abd5459d07f2742c4df920b25aae33c6482091a26000805473ffffffffffffffffffffffffffffffffffffffff19169055565b600054600160a060020a031681565b600154600160a060020a031681565b600260205260009081526040902054600160a060020a031681565b600054600160a060020a03163314610591576040805160e560020a62461bcd028152602060048201526001602482015260f860020a603102604482015290519081900360640190fd5b600160a060020a03811660009081526004602052604090205460ff161580156105d05750600160a060020a038116600090815260036020526040902054155b1515610626576040805160e560020a62461bcd02815260206004820152600260248201527f3233000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b600160a060020a03166000908152600360205260409020429055565b33600090815260026020526040812054600160a060020a0316156106b0576040805160e560020a62461bcd02815260206004820152600260248201527f3235000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b600154604080513360248201819052306044808401919091528351808403909101815260649092019092526020810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167f485cc955000000000000000000000000000000000000000000000000000000001790529091600160a060020a031690610737610a1c565b8084600160a060020a0316600160a060020a0316815260200183600160a060020a0316600160a060020a0316815260200180602001828103825283818151815260200191508051906020019080838360005b838110156107a1578181015183820152602001610789565b50505050905090810190601f1680156107ce5780820380516001836020036101000a031916815260200191505b50945050505050604051809103906000f0801580156107f1573d6000803e3d6000fd5b50336000908152600260205260409020805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a038316179055919050565b60055481565b600054600160a060020a0316331461087b576040805160e560020a62461bcd028152602060048201526001602482015260f860020a603102604482015290519081900360640190fd5b60065460ff16156108d6576040805160e560020a62461bcd02815260206004820152600260248201527f3431000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6006805460ff199081166001908117909255600160a060020a0390921660009081526004602052604090208054909216179055565b600054600160a060020a03163314610954576040805160e560020a62461bcd028152602060048201526001602482015260f860020a603102604482015290519081900360640190fd5b600160a060020a03811615156109b4576040805160e560020a62461bcd02815260206004820152600260248201527f3432000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60405161088080610a2d833901905600608060405234801561001057600080fd5b50604051610880380380610880833981016040908152815160208301519183015190920161004683640100000000610142810204565b61005882640100000000610164810204565b81600160a060020a03168160405180828051906020019080838360005b8381101561008d578181015183820152602001610075565b50505050905090810190601f1680156100ba5780820380516001836020036101000a031916815260200191505b50915050600060405180830381855af4915050151561013a57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600260248201527f3430000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b505050610229565b60018054600160a060020a031916600160a060020a0392909216919091179055565b600054600160a060020a03828116911614156101e157604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600260248201527f3336000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b60008054600160a060020a031916600160a060020a038316908117825560405190917fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b91a250565b610648806102386000396000f3006080604052600436106100825763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663025313a281146101135780633659cfe6146101445780634555d5c9146101675780634f1ef2861461018e5780635c60da1b146101e85780636fde8202146101fd578063f1739cae14610212575b600061008c610233565b9050600160a060020a03811615156100ee576040805160e560020a62461bcd02815260206004820152600260248201527f3335000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b60405136600082376000803683855af43d806000843e81801561010f578184f35b8184fd5b34801561011f57600080fd5b50610128610242565b60408051600160a060020a039092168252519081900360200190f35b34801561015057600080fd5b50610165600160a060020a0360043516610251565b005b34801561017357600080fd5b5061017c6102c4565b60408051918252519081900360200190f35b60408051602060046024803582810135601f8101859004850286018501909652858552610165958335600160a060020a03169536956044949193909101919081908401838280828437509497506102c99650505050505050565b3480156101f457600080fd5b50610128610233565b34801561020957600080fd5b50610128610408565b34801561021e57600080fd5b50610165600160a060020a0360043516610417565b600054600160a060020a031690565b600061024c610408565b905090565b610259610242565b600160a060020a031633146102b8576040805160e560020a62461bcd02815260206004820152600260248201527f3337000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6102c181610532565b50565b600290565b6102d1610242565b600160a060020a03163314610330576040805160e560020a62461bcd02815260206004820152600260248201527f3337000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b61033982610251565b30600160a060020a03168160405180828051906020019080838360005b8381101561036e578181015183820152602001610356565b50505050905090810190601f16801561039b5780820380516001836020036101000a031916815260200191505b50915050600060405180830381855af49150501515610404576040805160e560020a62461bcd02815260206004820152600260248201527f3339000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b5050565b600154600160a060020a031690565b61041f610242565b600160a060020a0316331461047e576040805160e560020a62461bcd02815260206004820152600260248201527f3337000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b600160a060020a03811615156104de576040805160e560020a62461bcd02815260206004820152600260248201527f3338000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b7f5a3e66efaa1e445ebd894728a69d6959842ea1e97bd79b892797106e270efcd9610507610242565b60408051600160a060020a03928316815291841660208301528051918290030190a16102c1816105ed565b600054600160a060020a0382811691161415610598576040805160e560020a62461bcd02815260206004820152600260248201527f3336000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a038316908117825560405190917fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b91a250565b6001805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a03929092169190911790555600a165627a7a723058205a76eeb859fefc55aa77f13726e89c3528896cc55767ac15a9b8596a75c076130029a165627a7a72305820f852f06edb3e50d672fbfae1d268c8d61d2c0ec7e349df315345a7e580ce5302002960806040526001805460a060020a60ff021916905534801561002057600080fd5b50610984806100306000396000f3006080604052600436106100ae5763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631b0f7ba981146100e65780633f801f91146101665780634555d5c9146101d4578063485cc955146101fb5780634c93505f146102225780634f8632ba1461023c5780635c60da1b1461026d57806363d256ce146102825780636fde8202146102975780637b103999146102ac5780638f4ffcb1146102c1575b60408051348152905133917fa419615bc8fda4c87663805ee2a3597a6d71c1d476911d9892f340d965bc7bf1919081900360200190a2005b3480156100f257600080fd5b50604080516020600460443581810135601f8101849004840285018401909552848452610152948235600160a060020a0316946024803560ff16953695946064949201919081908401838280828437509497506103319650505050505050565b604080519115158252519081900360200190f35b34801561017257600080fd5b50604080516020600460443581810135601f81018490048402850184019095528484526101d2948235600160a060020a0316946024803560ff169536959460649492019190819084018382808284375094975061056a9650505050505050565b005b3480156101e057600080fd5b506101e96105d0565b60408051918252519081900360200190f35b34801561020757600080fd5b506101d2600160a060020a03600435811690602435166105d5565b34801561022e57600080fd5b506101d26004351515610696565b34801561024857600080fd5b5061025161075c565b60408051600160a060020a039092168252519081900360200190f35b34801561027957600080fd5b5061025161076b565b34801561028e57600080fd5b5061015261077a565b3480156102a357600080fd5b5061025161078a565b3480156102b857600080fd5b50610251610799565b3480156102cd57600080fd5b50604080516020601f6064356004818101359283018490048402850184019095528184526101d294600160a060020a038135811695602480359660443590931695369560849492019181908401838280828437509497506107a89650505050505050565b600254600090600160a060020a03163314806103f0575060035460a060020a900460ff161580156103f05750600354604080517f69dc9ff30000000000000000000000000000000000000000000000000000000081523360048201529051600160a060020a03909216916369dc9ff3916024808201926020929091908290030181600087803b1580156103c357600080fd5b505af11580156103d7573d6000803e3d6000fd5b505050506040513d60208110156103ed57600080fd5b50515b1515610446576040805160e560020a62461bcd02815260206004820152600260248201527f3331000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b600083600181111561045457fe5b14156104d85783600160a060020a03168260405180828051906020019080838360005b8381101561048f578181015183820152602001610477565b50505050905090810190601f1680156104bc5780820380516001836020036101000a031916815260200191505b509150506000604051808303816000865af19150509050610563565b60018360018111156104e657fe5b14156105635783600160a060020a03168260405180828051906020019080838360005b83811015610521578181015183820152602001610509565b50505050905090810190601f16801561054e5780820380516001836020036101000a031916815260200191505b50915050600060405180830381855af4925050505b9392505050565b610575838383610331565b15156105cb576040805160e560020a62461bcd02815260206004820152600260248201527f3332000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b505050565b600290565b60015460a060020a900460ff1615610637576040805160e560020a62461bcd02815260206004820152600360248201527f3132330000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6001805474ff0000000000000000000000000000000000000000191660a060020a17905560028054600160a060020a0393841673ffffffffffffffffffffffffffffffffffffffff199182161790915560038054929093169116179055565b600254600160a060020a031633146106f8576040805160e560020a62461bcd02815260206004820152600360248201527f3132340000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6003805482151560a060020a810274ff0000000000000000000000000000000000000000199092169190911790915560408051918252517f2165014523a6f4135deffed62d70149aad59b64de5aac51e3abbcbe2a83e2f7e9181900360200190a150565b600254600160a060020a031681565b600054600160a060020a031690565b60035460a060020a900460ff1681565b600154600160a060020a031690565b600354600160a060020a031681565b604080517f23b872dd000000000000000000000000000000000000000000000000000000008152600160a060020a03868116600483015230602483015260448201869052915184928316916323b872dd9160648083019260209291908290030181600087803b15801561081a57600080fd5b505af115801561082e573d6000803e3d6000fd5b505050506040513d602081101561084457600080fd5b5051151561089c576040805160e560020a62461bcd02815260206004820152600160248201527f3400000000000000000000000000000000000000000000000000000000000000604482015290519081900360640190fd5b82600160a060020a031685600160a060020a03167fd65b48fd35864b3528d38e44760be5553248f89bf3ff6b06cca57817cc2650bf86856040518083815260200180602001828103825283818151815260200191508051906020019080838360005b838110156109165781810151838201526020016108fe565b50505050905090810190601f1680156109435780820380516001836020036101000a031916815260200191505b50935050505060405180910390a350505050505600a165627a7a72305820fac4594ddc501fa62385c2939be6467dfdc0cfe52d34403b2c4a3f15afb5156a0029"

export const proxyRegistryAbi: AbiItem[] = [
	{
		"constant": true,
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"name": "",
				"type": "string",
			},
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function",
	},
	{
		"constant": true,
		"inputs": [],
		"name": "initialAddressSet",
		"outputs": [
			{
				"name": "",
				"type": "bool",
			},
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function",
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "addr",
				"type": "address",
			},
		],
		"name": "endGrantAuthentication",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "addr",
				"type": "address",
			},
		],
		"name": "revokeAuthentication",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address",
			},
		],
		"name": "pending",
		"outputs": [
			{
				"name": "",
				"type": "uint256",
			},
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function",
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address",
			},
		],
		"name": "contracts",
		"outputs": [
			{
				"name": "",
				"type": "bool",
			},
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function",
	},
	{
		"constant": false,
		"inputs": [],
		"name": "renounceOwnership",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"constant": true,
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"name": "",
				"type": "address",
			},
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function",
	},
	{
		"constant": true,
		"inputs": [],
		"name": "delegateProxyImplementation",
		"outputs": [
			{
				"name": "",
				"type": "address",
			},
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function",
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address",
			},
		],
		"name": "proxies",
		"outputs": [
			{
				"name": "",
				"type": "address",
			},
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function",
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "addr",
				"type": "address",
			},
		],
		"name": "startGrantAuthentication",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"constant": false,
		"inputs": [],
		"name": "registerProxy",
		"outputs": [
			{
				"name": "proxy",
				"type": "address",
			},
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"constant": true,
		"inputs": [],
		"name": "DELAY_PERIOD",
		"outputs": [
			{
				"name": "",
				"type": "uint256",
			},
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function",
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "newOwner",
				"type": "address",
			},
		],
		"name": "transferOwnership",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function",
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor",
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "previousOwner",
				"type": "address",
			},
		],
		"name": "OwnershipRenounced",
		"type": "event",
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "previousOwner",
				"type": "address",
			},
			{
				"indexed": true,
				"name": "newOwner",
				"type": "address",
			},
		],
		"name": "OwnershipTransferred",
		"type": "event",
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "authAddress",
				"type": "address",
			},
		],
		"name": "grantInitialAuthentication",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function",
	},
]
